<!DOCTYPE HTML>
<html lang="English" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using nimibook -->
        <meta charset="UTF-8">
        <title>Basic Usage - Snorlogue</title>

        <!-- Custom HTML head -->

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="A Prologue extension for easy database administration">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>üê≥</text></svg>">
        <link rel="stylesheet" href="./assets/css/variables.css">
        <link rel="stylesheet" href="./assets/css/general.css">
        <link rel="stylesheet" href="./assets/css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="./assets/FontAwesome/css/font-awesome.min.css">

        <!-- Highlight.js Stylesheets - I could use nimib native highlight but let's keep it for styling... -->
        <link rel="stylesheet" href="./assets/css/highlight.css">
        <link rel="stylesheet" href="./assets/css/tomorrow-night.css">
        <link rel="stylesheet" href="./assets/css/ayu-highlight.css">

        <!-- Custom theme stylesheets - why the "../"? -->


        

            <script src="https://cdn.jsdelivr.net/gh/pietroppeter/nimib@main/assets/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

        
        <!-- plausible analytics (new in nimibook) -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = ".//assets";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                                <ol class="chapter">
                <li class="chapter-item expanded ">
                  <a href="./index.html" tabindex="0">
                    <strong aria-hidden="true">1.</strong> Welcome to Snorlogue!
                  </a></li>
                <li class="chapter-item expanded ">
                  <a href="./basicUsage.html" class="active" tabindex="0">
                    <strong aria-hidden="true">2.</strong> Basic Usage
                  </a></li>
                <li class="chapter-item expanded ">
                  <a href="./fileFields.html" tabindex="0">
                    <strong aria-hidden="true">3.</strong> File Fields
                  </a></li>
                <li class="chapter-item expanded ">
                  <a href="./actions.html" tabindex="0">
                    <strong aria-hidden="true">4.</strong> Actions
                  </a></li>
                <li class="chapter-item expanded ">
                  <a href="./customDatatypes.html" tabindex="0">
                    <strong aria-hidden="true">5.</strong> Custom Datatypes
                  </a></li>
                <li class="chapter-item expanded ">
                  <a href="./changelog.html" tabindex="0">
                    <strong aria-hidden="true">6.</strong> Changelog
                  </a></li>
                </ol>
<!-- I could use also an unescaped context value -->
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                    </div>

                    <h1 class="menu-title">Snorlogue</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/PhilippMDoerner/Snorlogue.git" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>


                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1>How Snorlogue uses models</h1>
<p>Snorlogue uses <a href="https://norm.nim.town/models.html">norm models</a> as a representation of your database in nim types.
By knowing the model type, it can generate code to interact with the database, figure out which HTML input fields would best represent the individual model fields, how to parse an HTML-Form into a model type etc.</p>
<p>To register a model, just use the <code>addCrudRoute</code> proc provided by Snorlogue.
Once you registered your models, call <code>addAdminRoutes</code> to add the pages providing an overview over the registered models and an SQL route.</p>
<p>Lets set up an Sqlite database with a simple norm model called <code>Creature</code>:</p>
                        <pre><code class="nohighlight hljs nim"><span class="hljs-keyword">import</span> norm/[sqlite, model]
<span class="hljs-keyword">import</span> std/options

<span class="hljs-comment"># Define the type</span>
<span class="hljs-keyword">type</span> <span class="hljs-type">Creature</span>* = <span class="hljs-keyword">ref</span> <span class="hljs-keyword">object</span> <span class="hljs-keyword">of</span> <span class="hljs-type">Model</span>
  name*: <span class="hljs-built_in">string</span>
  description*: <span class="hljs-type">Option</span>[<span class="hljs-built_in">string</span>]

<span class="hljs-keyword">proc</span> `$`*(entry: <span class="hljs-type">Creature</span>): <span class="hljs-built_in">string</span> = entry.name

putEnv(<span class="hljs-string">&quot;DB_HOST&quot;</span>, <span class="hljs-string">&quot;:memory:&quot;</span>) <span class="hljs-comment"># For norm to find the database, see: https://norm.nim.town/config.html</span>

<span class="hljs-comment"># Create the table.</span>
withDb:
  <span class="hljs-keyword">var</span> creature1 = <span class="hljs-type">Creature</span>(name: <span class="hljs-string">&quot;Bat&quot;</span>, description: some <span class="hljs-string">&quot;Flies in the dark&quot;</span>)
  db.createTables(creature1)
  db.insert(creature1)</code></pre>
                        <p>The Creature model has 3 fields in total: name, description and id, which is inherited from <code>Model</code>.</p>
<p>Note how we also provide a <code>$</code> proc to tell snorlogue how to represent an instance of <code>Creature</code> as a string!
This is mandatory, as Snorlogue does not provide a default way to represent a model as a string, but needs this functionality to generate all the HTML.</p>
<p>Now you can add them to a prologue server:</p>
                        <pre><code class="nohighlight hljs nim"><span class="hljs-keyword">import</span> prologue
<span class="hljs-keyword">import</span> snorlogue
<span class="hljs-comment"># Setup the server</span>
<span class="hljs-keyword">var</span> app: <span class="hljs-type">Prologue</span> = newApp()
app.addCrudRoutes(<span class="hljs-type">Creature</span>)
app.addAdminRoutes()
<span class="hljs-comment">#app.run() ## Can't compile a running HTTP server into docs ;-)</span></code></pre>
                        <p>And you're done! Your Prologue application now has access to the following GET routes:</p>
<pre><code>/admin/overview/
/admin/sql/
/admin/config
/admin/creature/list/
/admin/creature/list/&lt;Page index&gt;/
/admin/creature/detail/&lt;ID&gt;/
/admin/creature/delete/&lt;ID&gt;/
/admin/creature/create/
</code></pre>
<p>And the following POST route (which handles all form requests):</p>
<pre><code>/admin/creature/
</code></pre>
<p>Click around and try them out!</p>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="./index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="./fileFields.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="./index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="./fileFields.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>







        <script src="./assets/js/clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="./assets/js/book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
